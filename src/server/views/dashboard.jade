html
    head
        meta(charset='utf-8')
        meta(http-equiv='X-UA-Compatible', content='IE=edge')
        meta(name='viewport', content='width=device-width initial-scale=1')
        meta(name='description', content="The pluggable CMS")
        meta(name='robots', content='noindex, nofollow, noarchive, nosnippet')

        link(href='/lib/bootstrap/css/bootstrap.min.css', rel='stylesheet')
        link(href='/lib/font-awesome/css/font-awesome.min.css', rel='stylesheet')
        link(href='/css/client.css', rel='stylesheet')

        title HashBrown CMS
    body
        .dashboard-container
            .navspace
                .navbar-main
                    .tab-buttons
                        a.active(href='#welcome')
                            .pane-icon
                                img.logo(src='/svg/logo_grey.svg')
                            .pane-text
                                .pane-label
                                    |  HashBrown
                        a(href='#projects')
                            .pane-icon
                                span.fa.fa-folder
                            .pane-text
                                .pane-label
                                    |  Projects
                        a(href='#diagnostics')
                            .pane-icon
                                span.fa.fa-pie-chart
                            .pane-text
                                .pane-label
                                    |  Diagnostics


            .workspace
                if(update.behind)
                    section
                        h4 
                            a#update UPDATE
                        
                        .update
                            p
                                | You are #{update.amount} version#{update.amount != '1' ? 's' : ''} behind #{ update.branch }

                            button.btn.btn-primary.btn-update-hashbrown
                                | Update

                section
                    h4 
                        a#welcome WELCOME
                    
                    .welcome
                        p
                            | Welcome to the HashBrown dashboard. <br />
                            | Below you will find a list of active projects on this server.

                        p
                            | If you're a content author, you can click the "CMS" button to get started. <br />

                        p
                            | If you're an admin, you can use the various project menus ( <span class="fa fa-ellipsis-v"></span> and <span class="fa fa-plus"></span> ) to manage backups and create/delete environments and projects. 

                        p 
                            | If you feel completely lost, check out the <a href="http://hashbrown.rocks/guides" target="_blank">guides</a>
                
                section
                    h4 
                        a#projects PROJECTS
                    
                    .projects
                        .project-list

                        if(user.isAdmin)
                            .project-actions
                                button.btn.btn-primary.btn-round.btn-raised.btn-create-project +
                
                section
                    h4 
                        a#diagnostics DIAGNOSTICS
                    
                    table.diagnostics
                        tr
                            td Software
                            td HashBrown v#{app.version} 

                        tr
                            td Platform
                            td #{os.type()} 

                        each cpu, i in os.cpus()
                            tr
                                td CPU #{i + 1}
                                td #{cpu.model}
                        tr
                            td Memory
                            td #{Math.round(os.freemem() / 1000000)}mb / #{Math.round(os.totalmem() / 1000000)}mb

                        tr
                            td Load average
                            td #{Math.round(os.loadavg()[0] * 10000) / 10000}

                        tr
                            td Uptime
                            td #{Math.round(os.uptime() / 60)}m

        script(src='/lib/jquery/jquery.min.js')
        script(src='/lib/bootstrap/js/bootstrap.min.js')
        script(src='/js/dashboard.js')
