{"version":3,"sources":["../../src/Client/client.js"],"names":[],"mappings":"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","file":"client.js","sourcesContent":["'use strict';\n\n/**\n * @namespace HashBrown.Client\n */\n\n// Get routes\nrequire('Client/Routes');\n\n// Common\nrequire('Common/common');\n\n// Resource cache\nwindow.resources = {\n    connections: [],\n    content: [],\n    schemas: [],\n    media: [],\n    templates: [],\n    forms: [],\n    users: []\n};\n\n// Namespaces\nwindow._ = Crisp.Elements;\n\nwindow.HashBrown = {};\n\nHashBrown.Models = require('Client/Models');\nHashBrown.Views = {};\nHashBrown.Views.Widgets = require('Client/Views/Widgets');\nHashBrown.Views.Modals = require('Client/Views/Modals');\nHashBrown.Views.Navigation = require('Client/Views/Navigation');\nHashBrown.Views.Editors = require('Client/Views/Editors');\nHashBrown.Views.Editors.DeployerEditors = {};\nHashBrown.Views.Editors.ProcessorEditors = {};\nHashBrown.Views.Editors.FieldEditors = require('Client/Views/Editors/FieldEditors');\nHashBrown.Helpers = require('Client/Helpers');\n\n// Helper shortcuts\nwindow.debug = HashBrown.Helpers.DebugHelper;\nwindow.UI = HashBrown.Helpers.UIHelper;\n\n// Helper functions\nrequire('Client/helpers');\n\n// Preload resources \ndocument.addEventListener('DOMContentLoaded', () => {\n    const SettingsHelper = HashBrown.Helpers.SettingsHelper;\n    const LanguageHelper = HashBrown.Helpers.LanguageHelper;\n    const ProjectHelper = HashBrown.Helpers.ProjectHelper;\n\n    $('.page--environment__spinner').toggleClass('hidden', false);\n\n    SettingsHelper.getSettings(ProjectHelper.currentProject, null, 'sync')\n    .then(() => {\n        return LanguageHelper.getLanguages(ProjectHelper.currentProject);\n    })\n    .then(() => {\n        return HashBrown.Helpers.RequestHelper.reloadAllResources();\n    })\n    .then(() => {\n        for(let user of resources.users) {\n            if(user.isCurrent) {\n                HashBrown.Models.User.current = user;\n            }\n        }\n       \n        new HashBrown.Views.Navigation.NavbarMain();\n        new HashBrown.Views.Navigation.MainMenu();\n\n        Crisp.Router.check = (newRoute, cancel, proceed) => {\n            UI.highlight(false);\n\n            let contentEditor = Crisp.View.get('ContentEditor');\n\n            if(\n                (!contentEditor || !contentEditor.model) ||\n                (newRoute.indexOf(contentEditor.model.id) > -1) ||\n                (!contentEditor.dirty)\n            ) {\n                proceed();\n                return;\n            }\n\n            UI.confirmModal(\n                'Discard',\n                'Discard unsaved changes?',\n                'You have made changes to \"' + (contentEditor.model.prop('title', window.language) || contentEditor.model.id) + '\"',\n                () => {\n                    contentEditor.dirty = false;\n                    proceed();\n                },\n                cancel\n            );\n        };\n\n        $('.page--environment__spinner').toggleClass('hidden', true);\n\n        Crisp.Router.init();\n    })\n    .catch((e) => {\n        UI.errorModal(e);\n    });\n});\n"]}